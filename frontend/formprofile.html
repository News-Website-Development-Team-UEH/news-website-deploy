<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TheGRID - T√†i kho·∫£n c·ªßa b·∫°n</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/profile.css" />
  </head>
  <body>
    <header class="header bg-black text-light">
      <div class="container-fluid px-4 py-3">
        <div
          class="d-flex flex-column flex-lg-row align-items-center justify-content-between gap-3"
        >
          <!-- Logo -->
          <a href="index.html" class="navbar-brand text-light fs-3 fw-bold">
            <span>.</span>TheGRID
          </a>

          <!-- Categories (JS s·∫Ω render) -->
          <nav
            id="categoriesList"
            class="d-flex gap-3 flex-wrap justify-content-center"
          ></nav>

          <!-- Search + User -->
          <div class="d-flex align-items-center gap-3">
            <!-- Search gi·ªëng profile c≈© -->
            <a
              href="formsearch.html"
              class="btn btn-outline-light d-flex align-items-center gap-1"
            >
              üîç <span>T√¨m</span>
            </a>

            <!-- Mobile menu toggle -->
            <button
              id="menuToggle"
              class="btn btn-outline-light d-lg-none rounded-circle p-2"
            >
              <i class="fa fa-bars fs-4"></i>
            </button>

            <!-- Auth / Avatar -->
            <div class="dropdown">
              <a
                href="#"
                class="d-flex align-items-center text-decoration-none dropdown-toggle text-light"
                data-bs-toggle="dropdown"
              >
                <img
                  src="https://i.pravatar.cc/40"
                  alt="User"
                  class="rounded-circle me-2"
                />
              </a>
              <ul class="dropdown-menu dropdown-menu-end bg-dark">
                <li>
                  <a class="dropdown-item text-light" href="#" id="logoutBtn"
                    >ƒêƒÉng xu·∫•t</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Mobile menu -->
    <div
      id="mobileMenu"
      class="mobile-menu bg-dark text-light p-3 d-lg-none"
    ></div>

    <div id="mobileMenu" class="mobile-menu bg-dark text-light p-3"></div>

    <div class="main-container">
      <!-- Sidebar -->
      <aside class="sidebar bg-black text-light p-4">
        <h1 class="page-title">T√†i kho·∫£n c·ªßa b·∫°n</h1>

        <nav class="menu">
          <a href="#profile" class="menu-item active" id="profileLink">H·ªì s∆°</a>
          <a href="#following" class="menu-item" id="followedCategoriesLink"
            >Theo d√µi</a
          >
          <a href="#subscription" class="menu-item" id="subscriptionLink"
            >ƒêƒÉng k√≠ tr·ªü th√†nh t√°c gi·∫£</a
          >
          <!-- X√≥a logout ·ªü sidebar -->
        </nav>
      </aside>
      <main class="content-area">
        <div id="message" class="alert" role="alert"></div>

        <!-- H·ªì s∆° -->
        <section id="profileSection" class="profile-section">
          <h2 class="greeting">Xin ch√†o!</h2>

          <!-- Ch·∫ø ƒë·ªô xem -->
          <div id="profileView">
            <p>
              <strong>T√™n ƒëƒÉng nh·∫≠p:</strong> <span id="viewUsername"></span>
            </p>
            <p><strong>H·ªç v√† t√™n:</strong> <span id="viewFullName"></span></p>
            <p><strong>Email:</strong> <span id="viewEmail"></span></p>
            <p><strong>M·∫≠t kh·∫©u:</strong></p>
            <div class="button-group mt-4">
              <button type="button" class="btn-save" id="editProfileBtn">
                CH·ªàNH S·ª¨A
              </button>
            </div>
          </div>

          <!-- Ch·∫ø ƒë·ªô ch·ªânh s·ª≠a -->
          <form id="profileEditForm" style="display: none; margin-top: 30px">
            <div class="form-group">
              <label for="username" class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
              <input
                type="text"
                id="username"
                name="username"
                class="form-control"
              />
            </div>

            <div class="form-group">
              <label for="fullName" class="form-label">H·ªç v√† t√™n</label>
              <input
                type="text"
                id="fullName"
                name="fullName"
                class="form-control"
              />
            </div>

            <div class="form-group">
              <label for="email" class="form-label">Email</label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-control"
              />
            </div>
            <div id="passwordChange" style="margin-top: 40px">
              <h3 style="color: #fff; margin-bottom: 16px">ƒê·ªïi m·∫≠t kh·∫©u</h3>
              <div class="form-group mb-3">
                <label for="currentPassword" class="form-label text-light"
                  >M·∫≠t kh·∫©u hi·ªán t·∫°i</label
                >
                <input
                  type="password"
                  id="currentPassword"
                  class="form-control"
                  required
                />
              </div>
              <div class="form-group mb-3">
                <label for="newPassword" class="form-label text-light"
                  >M·∫≠t kh·∫©u m·ªõi</label
                >
                <input
                  type="password"
                  id="newPassword"
                  class="form-control"
                  required
                />
              </div>
              <div class="form-group mb-4">
                <label for="confirmPassword" class="form-label text-light"
                  >X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label
                >
                <input
                  type="password"
                  id="confirmPassword"
                  class="form-control"
                  required
                />
              </div>
            </div>
            <div class="button-group">
              <button type="button" class="btn-save" id="saveProfileBtn">
                L∆ØU
              </button>
              <button type="button" class="btn-cancel" id="cancelEditBtn">
                H·ª¶Y
              </button>
            </div>
          </form>
        </section>

        <!-- Theo d√µi -->
        <section
          id="followedCategoriesSection"
          class="profile-section"
          style="display: none"
        >
          <h3>C√°c ch·ªß ƒë·ªÅ b·∫°n ƒëang theo d√µi</h3>
          <div id="followedCategoriesList" class="mt-3"></div>
        </section>

        <!-- ƒêƒÉng k√Ω tr·ªü th√†nh t√°c gi·∫£ -->
        <section id="subscriptionSection" class="profile-section">
          <h2>Tr·ªü th√†nh t√°c gi·∫£ c·ªßa .TheGRID</h2>
          <p>Chia s·∫ª ki·∫øn th·ª©c c·ªßa b·∫°n v·ªõi c·ªông ƒë·ªìng.</p>

          <div
            id="authorRequestStatus"
            class="alert"
            style="display: none"
          ></div>

          <form id="authorApplicationForm">
            <!-- T√™n -->
            <div class="form-group mb-3">
              <label for="authorName">H·ªç v√† t√™n</label>
              <input
                type="text"
                id="authorName"
                class="form-control"
                placeholder="Nh·∫≠p h·ªç v√† t√™n"
                readonly
              />
            </div>

            <!-- Email -->
            <div class="form-group mb-3">
              <label for="authorEmail">Email</label>
              <input
                type="email"
                id="authorEmail"
                class="form-control"
                placeholder="Nh·∫≠p email"
                readonly
              />
            </div>

            <!-- S·ªë ƒëi·ªán tho·∫°i -->
            <div class="form-group mb-3">
              <label for="authorPhone">S·ªë ƒëi·ªán tho·∫°i</label>
              <input
                type="text"
                id="authorPhone"
                class="form-control"
                placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"
                readonly
              />
            </div>

            <!-- Avatar -->
            <div class="form-group mb-3">
              <label for="authorAvatar">·∫¢nh ƒë·∫°i di·ªán (t√πy ch·ªçn)</label>
              <input
                type="file"
                id="authorAvatar"
                accept="image/*"
                style="display: none"
              />
              <button
                type="button"
                id="uploadAvatarBtn"
                class="btn btn-secondary"
              >
                Ch·ªçn ·∫£nh
              </button>
              <div id="avatarPreview" class="mt-2">
                <span class="avatar-preview-text">Ch∆∞a c√≥ ·∫£nh</span>
              </div>
            </div>

            <!-- M√¥ t·∫£ b·∫£n th√¢n -->
            <div class="form-group mb-3">
              <label for="authorBio">M√¥ t·∫£ v·ªÅ b·∫£n th√¢n</label>
              <textarea
                id="authorBio"
                class="form-control"
                rows="4"
                placeholder="Vi·∫øt v√†i d√≤ng v·ªÅ b·∫°n‚Ä¶"
              ></textarea>
            </div>

            <button type="submit" class="btn btn-primary">
              ƒêƒÇNG K√ù TR·ªû TH√ÄNH T√ÅC GI·∫¢
            </button>
            <button
              type="button"
              id="cancelAuthorFormBtn"
              class="btn btn-outline-secondary"
            >
              H·ªßy
            </button>
          </form>
        </section>

        <!-- Th√¥ng tin t√°c gi·∫£ -->
        <section
          id="authorinfoSection"
          class="profile-section"
          style="display: none"
        >
          <h2 class="greeting">Th√¥ng tin t√°c gi·∫£</h2>

          <!-- Th√¥ng tin c√° nh√¢n t√°c gi·∫£ -->
          <div
            class="author-profile-card"
            style="background: transparent; padding: 0; margin-bottom: 40px"
          >
            <div
              class="author-info-header"
              style="
                display: flex;
                align-items: flex-start;
                gap: 25px;
                margin-bottom: 25px;
              "
            >
              <!-- Avatar tr√≤n b√™n tr√°i -->
              <div
                class="author-avatar"
                style="
                  width: 100px;
                  height: 100px;
                  border-radius: 50%;
                  background: #444;
                  overflow: hidden;
                  flex-shrink: 0;
                  border: 3px solid #555;
                "
              >
                <img
                  id="authorAvatarDisplay"
                  src=""
                  alt="Avatar"
                  style="
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    display: none;
                  "
                />
                <div
                  id="authorAvatarPlaceholder"
                  style="
                    width: 100%;
                    height: 100%;
                    background: #444;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: #888;
                    font-size: 32px;
                  "
                >
                  üë§
                </div>
              </div>

              <!-- Th√¥ng tin b√™n ph·∫£i -->
              <div class="author-details" style="flex: 1; padding-top: 5px">
                <h3
                  id="authorDisplayName"
                  style="
                    color: #ff4500;
                    font-size: 28px;
                    font-weight: 700;
                    margin: 0 0 8px 0;
                    line-height: 1.2;
                  "
                >
                  ƒêang t·∫£i...
                </h3>
                <p
                  id="authorDisplayPosition"
                  style="
                    color: #bbb;
                    font-size: 16px;
                    margin: 0 0 12px 0;
                    font-weight: 400;
                  "
                >
                  ƒêang t·∫£i...
                </p>
                <p
                  id="authorDisplayBio"
                  style="
                    color: #999;
                    font-size: 15px;
                    line-height: 1.5;
                    margin: 0 0 20px 0;
                    max-width: 500px;
                  "
                >
                  ƒêang t·∫£i th√¥ng tin t√°c gi·∫£...
                </p>

                <!-- Social links ngay d∆∞·ªõi bio -->
                <div
                  class="author-social-links"
                  style="display: flex; gap: 12px"
                >
                  <a
                    id="authorGithubLink"
                    href="#"
                    target="_blank"
                    style="
                      display: none;
                      width: 36px;
                      height: 36px;
                      background: #ff4500;
                      border-radius: 50%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: white;
                      text-decoration: none;
                      font-size: 16px;
                      font-weight: 600;
                    "
                    >G</a
                  >
                  <a
                    id="authorFacebookLink"
                    href="#"
                    target="_blank"
                    style="
                      display: none;
                      width: 36px;
                      height: 36px;
                      background: #ff4500;
                      border-radius: 50%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: white;
                      text-decoration: none;
                      font-size: 16px;
                      font-weight: 600;
                    "
                    >F</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="author-articles-section" style="margin-top: 50px">
            <h3
              style="
                color: #ff4500;
                font-size: 18px;
                font-weight: 600;
                margin: 0 0 25px 0;
              "
            >
              C√°c b√†i vi·∫øt c·ªßa b·∫°n
            </h3>

            <!-- N√∫t vi·∫øt b√†i lu√¥n hi·ªÉn th·ªã -->
            <div style="text-align: right; margin-bottom: 20px">
              <button
                id="createFirstArticleBtn"
                style="
                  background: #ff4500;
                  color: white;
                  border: none;
                  padding: 10px 24px;
                  border-radius: 25px;
                  font-size: 14px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                "
              >
                ‚úçÔ∏è Vi·∫øt b√†i ngay
              </button>
            </div>

            <!-- Danh s√°ch b√†i vi·∫øt (JS render) -->
            <div id="authorArticlesList" class="row g-4"></div>

            <!-- Tr·∫°ng th√°i ch∆∞a c√≥ b√†i vi·∫øt -->
            <div
              id="noArticlesState"
              class="no-articles-state"
              style="
                text-align: center;
                padding: 50px 30px;
                background: transparent;
                border: 2px dashed #444;
                border-radius: 8px;
                display: none;
              "
            >
              <p
                style="
                  color: #aaa;
                  font-size: 16px;
                  margin-bottom: 15px;
                  font-weight: 500;
                "
              >
                B·∫°n ch∆∞a c√≥ b√†i vi·∫øt n√†o ƒë∆∞·ª£c ƒëƒÉng t·∫£i.
              </p>
              <p
                style="
                  color: #777;
                  font-size: 14px;
                  margin-bottom: 25px;
                  line-height: 1.4;
                "
              >
                H√£y b·∫Øt ƒë·∫ßu chia s·∫ª ki·∫øn th·ª©c v√† kinh nghi·ªám c·ªßa b·∫°n v·ªõi c·ªông
                ƒë·ªìng!
              </p>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-logo">.TheGRID</div>
        <div class="footer-content">
          <div class="footer-links">
            <div class="footer-links-row">
              <a href="#">Li√™n h·ªá</a>
              <a href="#">G√≥p √Ω</a>
              <a href="#">Quy t·∫Øc c·ªông ƒë·ªìng</a>
              <a href="#">Gi·ªõi thi·ªáu</a>
              <a href="#">Tuy√™n b·ªë ƒë·∫°o ƒë·ª©c</a>
              <a href="#">C√°ch ch√∫ng t√¥i ƒë√°nh gi√° s·∫£n ph·∫©m</a>
            </div>
            <div class="footer-links-row">
              <a href="#">C√†i ƒë·∫∑t Cookie</a>
              <a href="#">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
              <a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
              <a href="#">Ch√≠nh s√°ch Cookie</a>
              <a href="#">C√¢u h·ªèi v·ªÅ b·∫£n quy·ªÅn</a>
              <a href="#">Kh·∫£ nƒÉng ti·∫øp c·∫≠n</a>
              <a href="#">Tr·∫°ng th√°i h·ªá th·ªëng</a>
            </div>
          </div>
          <div class="footer-social">
            <a href="#" class="social-icon">@</a>
            <a href="#" class="social-icon">f</a>
            <a href="#" class="social-icon">in</a>
            <a href="#" class="social-icon">‚Üí</a>
          </div>
        </div>
        <div class="footer-copyright">2025 TheGRID</div>
      </div>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/profile.api.js"></script>
    <script src="js/profile.author.js"></script>
    <script src="js/profile.page.js"></script>
    <script src="js/profile.main.js"></script>
  </body>
</html>
